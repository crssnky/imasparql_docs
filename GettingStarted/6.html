<!DOCTYPE html>
<html>

<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-51356556-8"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());

        gtag('config', 'UA-51356556-8');
    </script>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1,minimum-scale=1">
    <title>im@sparqlを繋げる</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link async href="../css/index.css" rel="stylesheet">
    <script defer src="../../js/jquery.min.js"></script>
    <script defer src="../../js/jquery.xdomainajax.js"></script>
    <script defer src="../../js/bootstrap.min.js"></script>
    <script defer src="../js/index.js"></script>
</head>

<body onload="loadCommon()">
    <!-- 共通 -->
    <div id="common"></div>
    <!-- 説明 -->
    <div class="container">
        <div class="page-header">
            <h1>
                <span class="aks">im@sparqlを繋げる</span>
                <span class="aks"><small>他のEndpointとLinkする</small></span>
            </h1>
        </div>
        <br>
        <dl class="descript">
            <dt>Linked Open Data</dt>
            <dd>
                何度も説明したことではありますが、<a href="https://sparql.crssnky.xyz/imas">im@sparql</a>はLinked Open Dataです。Linkしたオープンデータです。これが意味するところは同じエンドポイント内で相互に繋がるだけでなく、外部のエンドポイントとも繋がるということです。まぁ、述語の部分で<code><span class="Prefix">schema:</span></code>などの外部の語彙を使っているので今更ですかね。<br>
                今回は、データベースとして繋がるだけでなく、クエリの結果も繋げていくことを目指します。
            </dd>
            <br>
            <dt>クエリを打つ</dt>
            <script src="https://gist.github.com/crssnky/ee2a9c6474ea1f8f707cfafef6cef144.js"></script>
            <dd>
                「im@sparqlに眠る季語を含むユニット名」です。順に説明していきます。<br>
                SELECT文内は前半と後半に分けられ、後半は見慣れたものだと思います。そして前半ですが、<code><span class="Reserved-Word">service</span></code>句で囲まれた部分があります。これが、外部のエンドポイントに繋げてクエリを送っている部分になります。今回指定しているのは、私がある方の要望にお答えして別途用意した<a href="https://sparql.crssnky.xyz/SeasonWords/">季語のオープンデータのエンドポイント</a>です。気になる方は、第3章を参考にして冒険してみてください。<br>
                <code><span class="Reserved-Word">service</span></code>句が他のエンドポイントへクエリを飛ばすということが分かれば、あとは怖くないと思います。そのエンドポイントにある、季語と季節のセットを取り出しています。<br>
                他のエンドポイントに使った変数は、元のエンドポイントでも使用できます。後半では、im@sparqlからユニット名を取り出し、季語が含まれるもののみにフィルタリングしています。あまりにも数が多いのと同じサーバーに2つのクエリを送っているで<code><span class="Reserved-Word">limit</span></code>しています。あとは<code><span class="Reserved-Word">offset</span></code>を変更していろいろ見てみてください。
            </dd>
            <br>
            <dt>世界中のオープンデータの海を泳ぎ回る</dt>
            <dd>
                世の中には、このim@sparqlを作るきっかけになった行政データや研究機関のデータなど多くのエンドポイントが存在しています。京都市や大阪市では、役所が自前でエンドポイントを設けるなど積極的な取り組みが見られます。アイマスを発端に、ぜひともみなさんが良いSPARQL生活を過ごせることを願っております。
            </dd>
            <ul>
                <li>
                    <a href="https://data.city.kyoto.lg.jp/">京都市オープンデータポータルサイト</a>
                </li>
                <li>
                    <a href="https://data.city.osaka.lg.jp/">大阪市オープンデータポータルサイト</a>
                </li>
                <li>
                    <a href="https://odp.jig.jp/">オープンデータプラットフォーム</a>
                </li>
                <li>
                    <a href="http://lod4all.net/ja/index.html">LOD4ALL</a>
                </li>
            </ul>
        </dl>
    </div>
    <br>
    <br>
    <br>
</body>

</html>